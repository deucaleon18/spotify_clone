{"ast":null,"code":"/*! simple-get. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = simpleGet;\n\nconst concat = require('simple-concat');\n\nconst decompressResponse = require('decompress-response'); // excluded from browser build\n\n\nconst http = require('http');\n\nconst https = require('https');\n\nconst once = require('once');\n\nconst querystring = require('querystring');\n\nconst url = require('url');\n\nconst isStream = o => o !== null && typeof o === 'object' && typeof o.pipe === 'function';\n\nfunction simpleGet(opts, cb) {\n  opts = Object.assign({\n    maxRedirects: 10\n  }, typeof opts === 'string' ? {\n    url: opts\n  } : opts);\n  cb = once(cb);\n\n  if (opts.url) {\n    const {\n      hostname,\n      port,\n      protocol,\n      auth,\n      path\n    } = url.parse(opts.url); // eslint-disable-line node/no-deprecated-api\n\n    delete opts.url;\n    if (!hostname && !port && !protocol && !auth) opts.path = path; // Relative redirect\n    else Object.assign(opts, {\n        hostname,\n        port,\n        protocol,\n        auth,\n        path\n      }); // Absolute redirect\n  }\n\n  const headers = {\n    'accept-encoding': 'gzip, deflate'\n  };\n  if (opts.headers) Object.keys(opts.headers).forEach(k => headers[k.toLowerCase()] = opts.headers[k]);\n  opts.headers = headers;\n  let body;\n\n  if (opts.body) {\n    body = opts.json && !isStream(opts.body) ? JSON.stringify(opts.body) : opts.body;\n  } else if (opts.form) {\n    body = typeof opts.form === 'string' ? opts.form : querystring.stringify(opts.form);\n    opts.headers['content-type'] = 'application/x-www-form-urlencoded';\n  }\n\n  if (body) {\n    if (!opts.method) opts.method = 'POST';\n    if (!isStream(body)) opts.headers['content-length'] = Buffer.byteLength(body);\n    if (opts.json && !opts.form) opts.headers['content-type'] = 'application/json';\n  }\n\n  delete opts.body;\n  delete opts.form;\n  if (opts.json) opts.headers.accept = 'application/json';\n  if (opts.method) opts.method = opts.method.toUpperCase();\n  const protocol = opts.protocol === 'https:' ? https : http; // Support http/https urls\n\n  const req = protocol.request(opts, res => {\n    if (opts.followRedirects !== false && res.statusCode >= 300 && res.statusCode < 400 && res.headers.location) {\n      opts.url = res.headers.location; // Follow 3xx redirects\n\n      delete opts.headers.host; // Discard `host` header on redirect (see #32)\n\n      res.resume(); // Discard response\n\n      if (opts.method === 'POST' && [301, 302].includes(res.statusCode)) {\n        opts.method = 'GET'; // On 301/302 redirect, change POST to GET (see #35)\n\n        delete opts.headers['content-length'];\n        delete opts.headers['content-type'];\n      }\n\n      if (opts.maxRedirects-- === 0) return cb(new Error('too many redirects'));else return simpleGet(opts, cb);\n    }\n\n    const tryUnzip = typeof decompressResponse === 'function' && opts.method !== 'HEAD';\n    cb(null, tryUnzip ? decompressResponse(res) : res);\n  });\n  req.on('timeout', () => {\n    req.abort();\n    cb(new Error('Request timed out'));\n  });\n  req.on('error', cb);\n  if (isStream(body)) body.on('error', cb).pipe(req);else req.end(body);\n  return req;\n}\n\nsimpleGet.concat = (opts, cb) => {\n  return simpleGet(opts, (err, res) => {\n    if (err) return cb(err);\n    concat(res, (err, data) => {\n      if (err) return cb(err);\n\n      if (opts.json) {\n        try {\n          data = JSON.parse(data.toString());\n        } catch (err) {\n          return cb(err, res, data);\n        }\n      }\n\n      cb(null, res, data);\n    });\n  });\n};\n\n['get', 'post', 'put', 'patch', 'head', 'delete'].forEach(method => {\n  simpleGet[method] = (opts, cb) => {\n    if (typeof opts === 'string') opts = {\n      url: opts\n    };\n    return simpleGet(Object.assign({\n      method: method.toUpperCase()\n    }, opts), cb);\n  };\n});","map":{"version":3,"sources":["/home/deucaleon18/Desktop/deezer/node_modules/simple-get/index.js"],"names":["module","exports","simpleGet","concat","require","decompressResponse","http","https","once","querystring","url","isStream","o","pipe","opts","cb","Object","assign","maxRedirects","hostname","port","protocol","auth","path","parse","headers","keys","forEach","k","toLowerCase","body","json","JSON","stringify","form","method","Buffer","byteLength","accept","toUpperCase","req","request","res","followRedirects","statusCode","location","host","resume","includes","Error","tryUnzip","on","abort","end","err","data","toString"],"mappings":"AAAA;AACAA,MAAM,CAACC,OAAP,GAAiBC,SAAjB;;AAEA,MAAMC,MAAM,GAAGC,OAAO,CAAC,eAAD,CAAtB;;AACA,MAAMC,kBAAkB,GAAGD,OAAO,CAAC,qBAAD,CAAlC,C,CAA0D;;;AAC1D,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMG,KAAK,GAAGH,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMI,IAAI,GAAGJ,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMK,WAAW,GAAGL,OAAO,CAAC,aAAD,CAA3B;;AACA,MAAMM,GAAG,GAAGN,OAAO,CAAC,KAAD,CAAnB;;AAEA,MAAMO,QAAQ,GAAGC,CAAC,IAAIA,CAAC,KAAK,IAAN,IAAc,OAAOA,CAAP,KAAa,QAA3B,IAAuC,OAAOA,CAAC,CAACC,IAAT,KAAkB,UAA/E;;AAEA,SAASX,SAAT,CAAoBY,IAApB,EAA0BC,EAA1B,EAA8B;AAC5BD,EAAAA,IAAI,GAAGE,MAAM,CAACC,MAAP,CAAc;AAAEC,IAAAA,YAAY,EAAE;AAAhB,GAAd,EAAoC,OAAOJ,IAAP,KAAgB,QAAhB,GAA2B;AAAEJ,IAAAA,GAAG,EAAEI;AAAP,GAA3B,GAA2CA,IAA/E,CAAP;AACAC,EAAAA,EAAE,GAAGP,IAAI,CAACO,EAAD,CAAT;;AAEA,MAAID,IAAI,CAACJ,GAAT,EAAc;AACZ,UAAM;AAAES,MAAAA,QAAF;AAAYC,MAAAA,IAAZ;AAAkBC,MAAAA,QAAlB;AAA4BC,MAAAA,IAA5B;AAAkCC,MAAAA;AAAlC,QAA2Cb,GAAG,CAACc,KAAJ,CAAUV,IAAI,CAACJ,GAAf,CAAjD,CADY,CACyD;;AACrE,WAAOI,IAAI,CAACJ,GAAZ;AACA,QAAI,CAACS,QAAD,IAAa,CAACC,IAAd,IAAsB,CAACC,QAAvB,IAAmC,CAACC,IAAxC,EAA8CR,IAAI,CAACS,IAAL,GAAYA,IAAZ,CAA9C,CAA+D;AAA/D,SACKP,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoB;AAAEK,QAAAA,QAAF;AAAYC,QAAAA,IAAZ;AAAkBC,QAAAA,QAAlB;AAA4BC,QAAAA,IAA5B;AAAkCC,QAAAA;AAAlC,OAApB,EAJO,CAIuD;AACpE;;AAED,QAAME,OAAO,GAAG;AAAE,uBAAmB;AAArB,GAAhB;AACA,MAAIX,IAAI,CAACW,OAAT,EAAkBT,MAAM,CAACU,IAAP,CAAYZ,IAAI,CAACW,OAAjB,EAA0BE,OAA1B,CAAkCC,CAAC,IAAKH,OAAO,CAACG,CAAC,CAACC,WAAF,EAAD,CAAP,GAA2Bf,IAAI,CAACW,OAAL,CAAaG,CAAb,CAAnE;AAClBd,EAAAA,IAAI,CAACW,OAAL,GAAeA,OAAf;AAEA,MAAIK,IAAJ;;AACA,MAAIhB,IAAI,CAACgB,IAAT,EAAe;AACbA,IAAAA,IAAI,GAAGhB,IAAI,CAACiB,IAAL,IAAa,CAACpB,QAAQ,CAACG,IAAI,CAACgB,IAAN,CAAtB,GAAoCE,IAAI,CAACC,SAAL,CAAenB,IAAI,CAACgB,IAApB,CAApC,GAAgEhB,IAAI,CAACgB,IAA5E;AACD,GAFD,MAEO,IAAIhB,IAAI,CAACoB,IAAT,EAAe;AACpBJ,IAAAA,IAAI,GAAG,OAAOhB,IAAI,CAACoB,IAAZ,KAAqB,QAArB,GAAgCpB,IAAI,CAACoB,IAArC,GAA4CzB,WAAW,CAACwB,SAAZ,CAAsBnB,IAAI,CAACoB,IAA3B,CAAnD;AACApB,IAAAA,IAAI,CAACW,OAAL,CAAa,cAAb,IAA+B,mCAA/B;AACD;;AAED,MAAIK,IAAJ,EAAU;AACR,QAAI,CAAChB,IAAI,CAACqB,MAAV,EAAkBrB,IAAI,CAACqB,MAAL,GAAc,MAAd;AAClB,QAAI,CAACxB,QAAQ,CAACmB,IAAD,CAAb,EAAqBhB,IAAI,CAACW,OAAL,CAAa,gBAAb,IAAiCW,MAAM,CAACC,UAAP,CAAkBP,IAAlB,CAAjC;AACrB,QAAIhB,IAAI,CAACiB,IAAL,IAAa,CAACjB,IAAI,CAACoB,IAAvB,EAA6BpB,IAAI,CAACW,OAAL,CAAa,cAAb,IAA+B,kBAA/B;AAC9B;;AACD,SAAOX,IAAI,CAACgB,IAAZ;AAAkB,SAAOhB,IAAI,CAACoB,IAAZ;AAElB,MAAIpB,IAAI,CAACiB,IAAT,EAAejB,IAAI,CAACW,OAAL,CAAaa,MAAb,GAAsB,kBAAtB;AACf,MAAIxB,IAAI,CAACqB,MAAT,EAAiBrB,IAAI,CAACqB,MAAL,GAAcrB,IAAI,CAACqB,MAAL,CAAYI,WAAZ,EAAd;AAEjB,QAAMlB,QAAQ,GAAGP,IAAI,CAACO,QAAL,KAAkB,QAAlB,GAA6Bd,KAA7B,GAAqCD,IAAtD,CAjC4B,CAiC+B;;AAC3D,QAAMkC,GAAG,GAAGnB,QAAQ,CAACoB,OAAT,CAAiB3B,IAAjB,EAAuB4B,GAAG,IAAI;AACxC,QAAI5B,IAAI,CAAC6B,eAAL,KAAyB,KAAzB,IAAkCD,GAAG,CAACE,UAAJ,IAAkB,GAApD,IAA2DF,GAAG,CAACE,UAAJ,GAAiB,GAA5E,IAAmFF,GAAG,CAACjB,OAAJ,CAAYoB,QAAnG,EAA6G;AAC3G/B,MAAAA,IAAI,CAACJ,GAAL,GAAWgC,GAAG,CAACjB,OAAJ,CAAYoB,QAAvB,CAD2G,CAC3E;;AAChC,aAAO/B,IAAI,CAACW,OAAL,CAAaqB,IAApB,CAF2G,CAElF;;AACzBJ,MAAAA,GAAG,CAACK,MAAJ,GAH2G,CAG9F;;AAEb,UAAIjC,IAAI,CAACqB,MAAL,KAAgB,MAAhB,IAA0B,CAAC,GAAD,EAAM,GAAN,EAAWa,QAAX,CAAoBN,GAAG,CAACE,UAAxB,CAA9B,EAAmE;AACjE9B,QAAAA,IAAI,CAACqB,MAAL,GAAc,KAAd,CADiE,CAC7C;;AACpB,eAAOrB,IAAI,CAACW,OAAL,CAAa,gBAAb,CAAP;AAAuC,eAAOX,IAAI,CAACW,OAAL,CAAa,cAAb,CAAP;AACxC;;AAED,UAAIX,IAAI,CAACI,YAAL,OAAwB,CAA5B,EAA+B,OAAOH,EAAE,CAAC,IAAIkC,KAAJ,CAAU,oBAAV,CAAD,CAAT,CAA/B,KACK,OAAO/C,SAAS,CAACY,IAAD,EAAOC,EAAP,CAAhB;AACN;;AAED,UAAMmC,QAAQ,GAAG,OAAO7C,kBAAP,KAA8B,UAA9B,IAA4CS,IAAI,CAACqB,MAAL,KAAgB,MAA7E;AACApB,IAAAA,EAAE,CAAC,IAAD,EAAOmC,QAAQ,GAAG7C,kBAAkB,CAACqC,GAAD,CAArB,GAA6BA,GAA5C,CAAF;AACD,GAjBW,CAAZ;AAkBAF,EAAAA,GAAG,CAACW,EAAJ,CAAO,SAAP,EAAkB,MAAM;AACtBX,IAAAA,GAAG,CAACY,KAAJ;AACArC,IAAAA,EAAE,CAAC,IAAIkC,KAAJ,CAAU,mBAAV,CAAD,CAAF;AACD,GAHD;AAIAT,EAAAA,GAAG,CAACW,EAAJ,CAAO,OAAP,EAAgBpC,EAAhB;AAEA,MAAIJ,QAAQ,CAACmB,IAAD,CAAZ,EAAoBA,IAAI,CAACqB,EAAL,CAAQ,OAAR,EAAiBpC,EAAjB,EAAqBF,IAArB,CAA0B2B,GAA1B,EAApB,KACKA,GAAG,CAACa,GAAJ,CAAQvB,IAAR;AAEL,SAAOU,GAAP;AACD;;AAEDtC,SAAS,CAACC,MAAV,GAAmB,CAACW,IAAD,EAAOC,EAAP,KAAc;AAC/B,SAAOb,SAAS,CAACY,IAAD,EAAO,CAACwC,GAAD,EAAMZ,GAAN,KAAc;AACnC,QAAIY,GAAJ,EAAS,OAAOvC,EAAE,CAACuC,GAAD,CAAT;AACTnD,IAAAA,MAAM,CAACuC,GAAD,EAAM,CAACY,GAAD,EAAMC,IAAN,KAAe;AACzB,UAAID,GAAJ,EAAS,OAAOvC,EAAE,CAACuC,GAAD,CAAT;;AACT,UAAIxC,IAAI,CAACiB,IAAT,EAAe;AACb,YAAI;AACFwB,UAAAA,IAAI,GAAGvB,IAAI,CAACR,KAAL,CAAW+B,IAAI,CAACC,QAAL,EAAX,CAAP;AACD,SAFD,CAEE,OAAOF,GAAP,EAAY;AACZ,iBAAOvC,EAAE,CAACuC,GAAD,EAAMZ,GAAN,EAAWa,IAAX,CAAT;AACD;AACF;;AACDxC,MAAAA,EAAE,CAAC,IAAD,EAAO2B,GAAP,EAAYa,IAAZ,CAAF;AACD,KAVK,CAAN;AAWD,GAbe,CAAhB;AAcD,CAfD;;AAiBC,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,OAAvB,EAAgC,MAAhC,EAAwC,QAAxC,EAAkD5B,OAAlD,CAA0DQ,MAAM,IAAI;AACnEjC,EAAAA,SAAS,CAACiC,MAAD,CAAT,GAAoB,CAACrB,IAAD,EAAOC,EAAP,KAAc;AAChC,QAAI,OAAOD,IAAP,KAAgB,QAApB,EAA8BA,IAAI,GAAG;AAAEJ,MAAAA,GAAG,EAAEI;AAAP,KAAP;AAC9B,WAAOZ,SAAS,CAACc,MAAM,CAACC,MAAP,CAAc;AAAEkB,MAAAA,MAAM,EAAEA,MAAM,CAACI,WAAP;AAAV,KAAd,EAAgDzB,IAAhD,CAAD,EAAwDC,EAAxD,CAAhB;AACD,GAHD;AAID,CALA","sourcesContent":["/*! simple-get. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = simpleGet\n\nconst concat = require('simple-concat')\nconst decompressResponse = require('decompress-response') // excluded from browser build\nconst http = require('http')\nconst https = require('https')\nconst once = require('once')\nconst querystring = require('querystring')\nconst url = require('url')\n\nconst isStream = o => o !== null && typeof o === 'object' && typeof o.pipe === 'function'\n\nfunction simpleGet (opts, cb) {\n  opts = Object.assign({ maxRedirects: 10 }, typeof opts === 'string' ? { url: opts } : opts)\n  cb = once(cb)\n\n  if (opts.url) {\n    const { hostname, port, protocol, auth, path } = url.parse(opts.url) // eslint-disable-line node/no-deprecated-api\n    delete opts.url\n    if (!hostname && !port && !protocol && !auth) opts.path = path // Relative redirect\n    else Object.assign(opts, { hostname, port, protocol, auth, path }) // Absolute redirect\n  }\n\n  const headers = { 'accept-encoding': 'gzip, deflate' }\n  if (opts.headers) Object.keys(opts.headers).forEach(k => (headers[k.toLowerCase()] = opts.headers[k]))\n  opts.headers = headers\n\n  let body\n  if (opts.body) {\n    body = opts.json && !isStream(opts.body) ? JSON.stringify(opts.body) : opts.body\n  } else if (opts.form) {\n    body = typeof opts.form === 'string' ? opts.form : querystring.stringify(opts.form)\n    opts.headers['content-type'] = 'application/x-www-form-urlencoded'\n  }\n\n  if (body) {\n    if (!opts.method) opts.method = 'POST'\n    if (!isStream(body)) opts.headers['content-length'] = Buffer.byteLength(body)\n    if (opts.json && !opts.form) opts.headers['content-type'] = 'application/json'\n  }\n  delete opts.body; delete opts.form\n\n  if (opts.json) opts.headers.accept = 'application/json'\n  if (opts.method) opts.method = opts.method.toUpperCase()\n\n  const protocol = opts.protocol === 'https:' ? https : http // Support http/https urls\n  const req = protocol.request(opts, res => {\n    if (opts.followRedirects !== false && res.statusCode >= 300 && res.statusCode < 400 && res.headers.location) {\n      opts.url = res.headers.location // Follow 3xx redirects\n      delete opts.headers.host // Discard `host` header on redirect (see #32)\n      res.resume() // Discard response\n\n      if (opts.method === 'POST' && [301, 302].includes(res.statusCode)) {\n        opts.method = 'GET' // On 301/302 redirect, change POST to GET (see #35)\n        delete opts.headers['content-length']; delete opts.headers['content-type']\n      }\n\n      if (opts.maxRedirects-- === 0) return cb(new Error('too many redirects'))\n      else return simpleGet(opts, cb)\n    }\n\n    const tryUnzip = typeof decompressResponse === 'function' && opts.method !== 'HEAD'\n    cb(null, tryUnzip ? decompressResponse(res) : res)\n  })\n  req.on('timeout', () => {\n    req.abort()\n    cb(new Error('Request timed out'))\n  })\n  req.on('error', cb)\n\n  if (isStream(body)) body.on('error', cb).pipe(req)\n  else req.end(body)\n\n  return req\n}\n\nsimpleGet.concat = (opts, cb) => {\n  return simpleGet(opts, (err, res) => {\n    if (err) return cb(err)\n    concat(res, (err, data) => {\n      if (err) return cb(err)\n      if (opts.json) {\n        try {\n          data = JSON.parse(data.toString())\n        } catch (err) {\n          return cb(err, res, data)\n        }\n      }\n      cb(null, res, data)\n    })\n  })\n}\n\n;['get', 'post', 'put', 'patch', 'head', 'delete'].forEach(method => {\n  simpleGet[method] = (opts, cb) => {\n    if (typeof opts === 'string') opts = { url: opts }\n    return simpleGet(Object.assign({ method: method.toUpperCase() }, opts), cb)\n  }\n})\n"]},"metadata":{},"sourceType":"script"}